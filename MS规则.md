## 关键字就是“新建/写入/复制/删除/运行”。就是中文的，你没看错

# MS规则

### 1. 新建

- **格式**：  
  
  ```
  新建 路径
  ```

- **路径**  
  
  - 可以是目录（无扩展名）或文件（有扩展名）。  
  - 支持多级目录，例如 `新建 src/utils/logger.h`。  

- **行为**  
  
  - 目录不存在会**自动递归创建**。  
  - 若路径含扩展名，则先建空文件；无扩展名则建目录。

---

### 2. 写入

- **格式**：  
  
  ```
  写入 文件路径
  """
      第一行内容
      第二行内容
      ...
  """
  ```

- **格式**  
  
  - **使用三引号块**  
  - 仅支持三引号块
  - 引号块内缩进不管

- **路径**  
  
  - 与“新建”规则相同；目录不存在自动创建。  

- **行为**  
  
  - 把使用 三引号块 包裹起来了的文本写进目标文件，**覆盖式写入**。

---

### 3. 复制

- **格式**：  
  
  ```
  复制 源路径 目标路径
  ```

- **路径**  
  
  - 相对脚本目录（BASE）。  
  - 目标路径为 **`.`** 表示“主目录”（即 `.ms` 文件所在目录）。

- **行为**  
  
  - 目录 → 目录：整树拷贝，允许已存在目录 (`dirs_exist_ok=True`)。  
  - 文件 → 文件/目录：按 shutil.copy2 行为。

---

### 4. 删除

- **格式**：  
  
  ```
  删除 路径
  ```

- **行为**  
  
  - 目录：递归删除。  
  - 文件：直接删除。  
  - 路径不存在时不报错（`os.remove/rmtree` 已包异常）。

---

### 5. 移动

- **格式**
  
  ```
  移动 源路径 目标路径
  ```

- **路径**
  
  - 相对脚本目录（BASE）。
  - 目标路径为 **`.`** 表示“主目录”（即 `.ms` 文件所在目录）。

- **行为**
  
  - 文件或目录均可移动；目录不存在自动创建。
  - 目标已存在同名文件/目录时，会报错。
  - 源路径不存在时报错。

---

### 6. 运行

- **格式**：  
  
  ```
  运行 shell命令
  
   *也可以直接运行.bat.py等*
  运行 路径
  ```

- **注意**  
  
  - **工作目录被硬编码为 `folderB`**（见代码 `work_dir = os.path.join(BASE, 'folderB')`）。  
  - 因此命令里所有相对路径都基于 `folderB`。  
  - 命令可以含空格、管道、&&、|| 等，整行原样丢给 `subprocess.run(..., shell=True)`。

---

### 7. 通用规则

- **大小写敏感**：关键字必须是“新建/写入/复制/删除/移动/运行”。  
- **排版规则**  
  - 每条ms指令**必须独占一行**            使用 **空行** 或 **整行注释**  *(以 `#` 开头)* 来分隔        可混用
    
    **空行**分隔如下：
    
    ```
    新建 我是第一条ms指令.txt
    
    新建 我是第二条ms指令.txt
    ```
    
    **整行注释** 分隔如下：
    
    ```
    新建 我是第一条ms指令.txt
    #我是注释
    新建 我是第二条ms指令.txt
    ```
  
  - 不支持行内注释/行尾注释

---

### 示例

把下面内容保存为 `demo.ms`，可直接运行验证：

```
# 创建测试环境
新建 sub

新建 test.txt

写入 test.txt
"""
hello, world!
"""

# 把 test.txt 移到 sub 目录
移动 test.txt  sub/hello.txt

# 再把它移回主目录
移动 sub/hello.txt  .
```

运行过程：

- 主目录 *（即 `.ms` 文件所在目录）* 出现了 `sub`文件夹

- `test.txt` 出现在 主目录

- `test.txt`内部写入了 *hello, world!*

- `test.txt` 被从 主目录 移动到 sub目录 ，并且被重命名为 `hello.txt`

-  `hello.txt` 被移动到 主目录

也就是，你**最终**会看到一个 `sub`文件夹 和 `hello.txt`         *（还有一个额外自动出现的 `backups`文件夹 存放了 `demo.ms` 的备份文件）*
